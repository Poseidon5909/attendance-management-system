{% extends "base.html" %}
{% block title %}Student Attendance Report{% endblock %}
{% block content %}

<h2 class="mb-4">Student Attendance Report</h2>

{% if report %}
<div class="table-responsive card shadow-sm">
    <table class="table table-hover mb-0">
        <thead class="table-dark">
            <tr>
                <th>Student Name</th>
                <th class="text-center">Present Days</th>
                <th class="text-center">Absent Days</th>
                <th class="text-center">Total Days</th>
                <th class="text-center">Attendance %</th>
            </tr>
        </thead>
        <tbody>
            {% for r in report %}
            {% set total = r.present + r.absent %}
            {% set percentage = (r.present / total * 100) | round(2) if total else 0 %}
            <tr>
                <td><strong>{{ r.name }}</strong></td>
                <td class="text-center">
                    <span class="badge bg-success">{{ r.present }}</span>
                </td>
                <td class="text-center">
                    <span class="badge bg-danger">{{ r.absent }}</span>
                </td>
                <td class="text-center">{{ total }}</td>
                <td class="text-center">
                    {% if percentage >= 75 %}
                        <span class="badge bg-success">{{ percentage }}%</span>
                    {% elif percentage >= 60 %}
                        <span class="badge bg-warning text-dark">{{ percentage }}%</span>
                    {% else %}
                        <span class="badge bg-danger">{{ percentage }}%</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info" role="alert">
    <p class="mb-0">No attendance records found.</p>
</div>
{% endif %}

<div class="mt-4">
    <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>

{% endblock %}
